# DreamPath AI ì—ì´ì „íŠ¸ ì„¤ê³„ ë¬¸ì„œ

## 1. ê°œìš”

### 1.1 ëª©í‘œ
ê¸°ì¡´ ì§„ë¡œ ìƒë‹´ ì±„íŒ…ì— AI ì—ì´ì „íŠ¸ë¥¼ í†µí•©í•˜ì—¬, ëŒ€í™” íë¦„ì„ ë¶„ì„í•˜ê³  ì ì ˆí•œ ì‹œì ì— ë©˜í† ë§/í•™ìŠµ ê²½ë¡œ ë“±ì„ **í”„ë¡œì•¡í‹°ë¸Œí•˜ê²Œ ì œì•ˆ**

### 1.2 í•µì‹¬ ì»¨ì…‰
- **ë³„ë„ í˜ì´ì§€ X** â†’ ê¸°ì¡´ `/career-chat`ì— í†µí•©
- **AIê°€ ë¼ì–´ë“¦** â†’ ëŒ€í™” ë¶„ì„ í›„ ì ì ˆí•œ ì‹œì ì— ì œì•ˆ
- **ìì—°ìŠ¤ëŸ¬ìš´ íë¦„** â†’ ìƒë‹´ ë§¥ë½ì„ ìœ ì§€í•˜ë©´ì„œ í–‰ë™ ì œì•ˆ

### 1.3 ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤

```
[ê¸°ì¡´ ì§„ë¡œ ìƒë‹´ íë¦„]

ì‚¬ìš©ì: "ìš”ì¦˜ ë””ìì¸ì— ê´€ì‹¬ì´ ìƒê²¼ì–´ìš”"
AI: "ì–´ë–¤ ê³„ê¸°ë¡œ ê´€ì‹¬ì´ ìƒê¸°ì…¨ë‚˜ìš”?"
ì‚¬ìš©ì: "ì¹œêµ¬ê°€ ë§Œë“  ì•± UI ë³´ê³  ë‚˜ë„ í•´ë³´ê³  ì‹¶ë‹¤ëŠ” ìƒê°ì´..."
AI: "ì§ì ‘ ë§Œë“¤ì–´ë³´ê³  ì‹¶ì€ ë§ˆìŒë„ ìˆìœ¼ì‹ ê°€ìš”?"
ì‚¬ìš©ì: "ë„¤, ê·¼ë° ë­˜ ì–´ë–»ê²Œ ì‹œì‘í•´ì•¼ í• ì§€..."

... (ëŒ€í™”ê°€ ìŒ“ì´ë©´ì„œ UX ë””ìì´ë„ˆ ë°©í–¥ì´ ìœ¤ê³½ ì¡í˜) ...

[AI ì—ì´ì „íŠ¸ê°€ ë¼ì–´ë“¦]

AI: "ğŸ’¡ ëŒ€í™”ë¥¼ ë³´ë‹ˆ UX ë””ìì¸ ìª½ì— ê´€ì‹¬ì´ ìˆìœ¼ì‹œë„¤ìš”!

    ë§ˆì¹¨ ì´ë²ˆ ì£¼ì— ê´€ë ¨ ë©˜í† ë§ ì„¸ì…˜ì´ ìˆì–´ìš”:

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ ğŸ“… ê¹€ë©˜í† ë‹˜ (ì¹´ì¹´ì˜¤ UX ë””ìì´ë„ˆ)     â”‚
    â”‚    ëª©ìš”ì¼ ì˜¤í›„ 7ì‹œ                   â”‚
    â”‚    ì£¼ì œ: ë¹„ì „ê³µìì˜ UX ì „í™˜ ìŠ¤í† ë¦¬   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    ì°¸ì—¬í•´ë³´ì‹¤ë˜ìš”?

    [ì˜ˆì•½í•˜ê¸°] [ë‹¤ë¥¸ ì„¸ì…˜ ë³´ê¸°] [ê³„ì† ëŒ€í™”í•˜ê¸°]"

ì‚¬ìš©ì: (ì˜ˆì•½í•˜ê¸° í´ë¦­)

AI: "âœ… ëª©ìš”ì¼ ì˜¤í›„ 7ì‹œ ë©˜í† ë§ ì˜ˆì•½í–ˆì–´ìš”!
    í•˜ë£¨ ì „ì— ì•Œë¦¼ ë³´ë‚´ë“œë¦´ê²Œìš”.

    ë©˜í† ë‹˜ê»˜ ë¬¼ì–´ë³¼ ì§ˆë¬¸ ë¯¸ë¦¬ ì¤€ë¹„í•´ë“œë¦´ê¹Œìš”?

    [ì§ˆë¬¸ ì¤€ë¹„í•´ì¤˜] [ê´œì°®ì•„ìš”]"
```

---

## 2. ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### 2.1 í†µí•© êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Frontend (React)                         â”‚
â”‚                /pages/career-chat/page.tsx                   â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ê¸°ì¡´ ì±„íŒ… UI + ì—ì´ì „íŠ¸ í™•ì¥                        â”‚    â”‚
â”‚  â”‚                                                      â”‚    â”‚
â”‚  â”‚  - ê¸°ì¡´ ë©”ì‹œì§€ (user/assistant)                      â”‚    â”‚
â”‚  â”‚  - [NEW] ì—ì´ì „íŠ¸ ì¹´ë“œ (ë©˜í† ë§ ì œì•ˆ, í•™ìŠµ ê²½ë¡œ ë“±)   â”‚    â”‚
â”‚  â”‚  - [NEW] ì•¡ì…˜ ë²„íŠ¼ (ì˜ˆì•½í•˜ê¸°, ë” ë³´ê¸° ë“±)           â”‚    â”‚
â”‚  â”‚  - [NEW] ì‹¤ì‹œê°„ ì²˜ë¦¬ í‘œì‹œ (ê²€ìƒ‰ ì¤‘, ì˜ˆì•½ ì¤‘...)     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Backend (Spring Boot)                       â”‚
â”‚                                                              â”‚
â”‚  CareerChatController (ê¸°ì¡´)                                 â”‚
â”‚  - POST /api/chat                                            â”‚
â”‚                                                              â”‚
â”‚  [NEW] ì—ì´ì „íŠ¸ íŠ¸ë¦¬ê±° ë¡œì§                                  â”‚
â”‚  - ì‘ë‹µì— agent_action í¬í•¨ ì—¬ë¶€ í™•ì¸                        â”‚
â”‚  - agent_actionì´ ìˆìœ¼ë©´ í”„ë¡ íŠ¸ì— ì „ë‹¬                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Python AI Service (FastAPI)                   â”‚
â”‚                                                              â”‚
â”‚  ChatService (ê¸°ì¡´) + AgentIntegration (NEW)                 â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ëŒ€í™” ë¶„ì„ â†’ íŠ¸ë¦¬ê±° ê°ì§€ â†’ ì—ì´ì „íŠ¸ ì•¡ì…˜             â”‚    â”‚
â”‚  â”‚                                                      â”‚    â”‚
â”‚  â”‚  1. ì‚¬ìš©ì ë©”ì‹œì§€ + ëŒ€í™” íˆìŠ¤í† ë¦¬ ë¶„ì„               â”‚    â”‚
â”‚  â”‚  2. ì§ì—… ê´€ì‹¬ì‚¬ê°€ ìœ¤ê³½ ì¡í˜”ëŠ”ì§€ íŒë‹¨                 â”‚    â”‚
â”‚  â”‚  3. ìœ¤ê³½ ì¡íˆë©´ â†’ ë©˜í† ë§/í•™ìŠµê²½ë¡œ ê²€ìƒ‰               â”‚    â”‚
â”‚  â”‚  4. ì¼ë°˜ ì‘ë‹µ + agent_action í•¨ê»˜ ë°˜í™˜               â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                              â”‚
â”‚  Tools (ì—ì´ì „íŠ¸ê°€ ì‚¬ìš©):                                    â”‚
â”‚  â”œâ”€â”€ search_mentoring_sessions  # ë©˜í† ë§ ì„¸ì…˜ ê²€ìƒ‰          â”‚
â”‚  â”œâ”€â”€ create_mentoring_booking   # ë©˜í† ë§ ì˜ˆì•½               â”‚
â”‚  â”œâ”€â”€ search_learning_paths      # í•™ìŠµ ê²½ë¡œ ê²€ìƒ‰            â”‚
â”‚  â”œâ”€â”€ create_learning_path       # í•™ìŠµ ê²½ë¡œ ìƒì„±            â”‚
â”‚  â””â”€â”€ search_job_postings        # ì±„ìš©ê³µê³  ê²€ìƒ‰             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 ê¸°ì¡´ vs ë³€ê²½

| êµ¬ë¶„ | ê¸°ì¡´ | ë³€ê²½ í›„ |
|------|------|---------|
| ì±„íŒ… ì‘ë‹µ | `{ message, identityStatus }` | `{ message, identityStatus, agentAction? }` |
| AI ì—­í•  | ì§„ë¡œ ìƒë‹´ë§Œ | ì§„ë¡œ ìƒë‹´ + í”„ë¡œì•¡í‹°ë¸Œ ì œì•ˆ |
| ë©˜í† ë§ ì—°ê²° | ì‚¬ìš©ìê°€ ì§ì ‘ ì°¾ì•„ê° | AIê°€ ì ì ˆí•œ ì‹œì ì— ì œì•ˆ |

---

## 3. ì—ì´ì „íŠ¸ íŠ¸ë¦¬ê±° ë¡œì§

### 3.1 íŠ¸ë¦¬ê±° ì¡°ê±´

AIê°€ ëŒ€í™”ë¥¼ ë¶„ì„í•˜ì—¬ ë‹¤ìŒ ì¡°ê±´ì„ ê°ì§€:

```python
TRIGGER_CONDITIONS = {
    "mentoring_suggestion": {
        "description": "ë©˜í† ë§ ì„¸ì…˜ ì œì•ˆ",
        "conditions": [
            "íŠ¹ì • ì§ì—…/ë¶„ì•¼ì— ëŒ€í•œ ê´€ì‹¬ì´ 3íšŒ ì´ìƒ ì–¸ê¸‰ë¨",
            "ì •ì²´ì„± ëª…í™•ë„ê°€ 50% ì´ìƒ",
            "ì‚¬ìš©ìê°€ 'ì–´ë–»ê²Œ ì‹œì‘í•´ì•¼ í• ì§€', 'ë­˜ í•´ì•¼ í• ì§€' ë“± ë°©í–¥ì„± ì§ˆë¬¸"
        ]
    },
    "learning_path_suggestion": {
        "description": "í•™ìŠµ ê²½ë¡œ ì œì•ˆ",
        "conditions": [
            "ì§ì—…ì´ êµ¬ì²´í™”ë¨ (ì˜ˆ: UX ë””ìì´ë„ˆ)",
            "ì‚¬ìš©ìê°€ í•™ìŠµ/ì¤€ë¹„ì— ëŒ€í•´ ì–¸ê¸‰",
            "ì •ì²´ì„± ëª…í™•ë„ê°€ 70% ì´ìƒ"
        ]
    },
    "job_posting_suggestion": {
        "description": "ì±„ìš©ê³µê³  ì œì•ˆ",
        "conditions": [
            "ì§ì—…ì´ í™•ì •ë¨",
            "ì‚¬ìš©ìê°€ ì·¨ì—…/ì´ì§ ì–¸ê¸‰",
            "í•™ìŠµ ê²½ë¡œ ì§„í–‰ë¥  50% ì´ìƒ"
        ]
    }
}
```

### 3.2 íŠ¸ë¦¬ê±° íŒë‹¨ í”„ë¡¬í”„íŠ¸

```python
TRIGGER_ANALYSIS_PROMPT = """
ë‹¹ì‹ ì€ ì§„ë¡œ ìƒë‹´ AIì˜ ì—ì´ì „íŠ¸ì…ë‹ˆë‹¤.
ëŒ€í™” ë‚´ìš©ì„ ë¶„ì„í•˜ì—¬ ì‚¬ìš©ìì—ê²Œ ë„ì›€ì´ ë  í–‰ë™ì„ ì œì•ˆí•  ì‹œì ì¸ì§€ íŒë‹¨í•˜ì„¸ìš”.

## í˜„ì¬ ëŒ€í™” ìƒíƒœ
- ì •ì²´ì„± ëª…í™•ë„: {identity_clarity}%
- í˜„ì¬ ë‹¨ê³„: {current_stage}
- ê°ì§€ëœ ê´€ì‹¬ ë¶„ì•¼: {detected_interests}

## ìµœê·¼ ëŒ€í™”
{conversation_history}

## íŒë‹¨ ê¸°ì¤€
1. ì‚¬ìš©ìê°€ íŠ¹ì • ì§ì—…/ë¶„ì•¼ì— ëŒ€í•´ êµ¬ì²´ì ì¸ ê´€ì‹¬ì„ ë³´ì´ëŠ”ê°€?
2. ë°©í–¥ì„±ì— ëŒ€í•œ ê³ ë¯¼ì„ í‘œí˜„í–ˆëŠ”ê°€? (ì–´ë–»ê²Œ ì‹œì‘í•´ì•¼ í• ì§€, ë­˜ ë°°ì›Œì•¼ í• ì§€ ë“±)
3. í˜„ì¬ ì‹œì ì— ì œì•ˆì„ í•˜ëŠ” ê²ƒì´ ëŒ€í™” íë¦„ì— ìì—°ìŠ¤ëŸ¬ìš´ê°€?

## ì‘ë‹µ í˜•ì‹
{
    "should_trigger": true/false,
    "trigger_type": "mentoring_suggestion" | "learning_path_suggestion" | "job_posting_suggestion" | null,
    "reason": "ì œì•ˆ ì´ìœ  (ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì¤„ ë¬¸êµ¬)",
    "detected_career": "ê°ì§€ëœ ì§ì—…/ë¶„ì•¼",
    "confidence": 0.0-1.0
}
"""
```

---

## 4. ì‘ë‹µ êµ¬ì¡° ì„¤ê³„

### 4.1 ê¸°ì¡´ ì‘ë‹µ (ë³€ê²½ ì—†ìŒ)

```json
{
    "sessionId": "uuid",
    "message": "ì–´ë–¤ ê³„ê¸°ë¡œ ê´€ì‹¬ì´ ìƒê¸°ì…¨ë‚˜ìš”?",
    "identityStatus": {
        "clarity": 45,
        "traits": ["ì°½ì˜ì„±", "ì‹œê°ì  ê°ê°"],
        "insights": ["ë””ìì¸ ë¶„ì•¼ì— ê´€ì‹¬"]
    }
}
```

### 4.2 ì—ì´ì „íŠ¸ ì•¡ì…˜ í¬í•¨ ì‘ë‹µ (NEW)

```json
{
    "sessionId": "uuid",
    "message": "UX ë””ìì¸ì— ê´€ì‹¬ì´ ìˆìœ¼ì‹œë„¤ìš”! ë§ˆì¹¨ ê´€ë ¨ ë©˜í† ë§ ì„¸ì…˜ì´ ìˆì–´ìš”.",
    "identityStatus": { ... },
    "agentAction": {
        "type": "mentoring_suggestion",
        "reason": "ëŒ€í™”ë¥¼ ë³´ë‹ˆ UX ë””ìì¸ ìª½ì— ê´€ì‹¬ì´ ìˆìœ¼ì‹œë„¤ìš”",
        "data": {
            "sessions": [
                {
                    "id": 123,
                    "mentorName": "ê¹€ë©˜í† ",
                    "mentorTitle": "ì¹´ì¹´ì˜¤ UX ë””ìì´ë„ˆ",
                    "topic": "ë¹„ì „ê³µìì˜ UX ì „í™˜ ìŠ¤í† ë¦¬",
                    "datetime": "2024-01-15T19:00:00",
                    "availableSlots": 3
                }
            ]
        },
        "actions": [
            { "id": "book", "label": "ì˜ˆì•½í•˜ê¸°", "primary": true },
            { "id": "more", "label": "ë‹¤ë¥¸ ì„¸ì…˜ ë³´ê¸°" },
            { "id": "skip", "label": "ê³„ì† ëŒ€í™”í•˜ê¸°" }
        ]
    }
}
```

### 4.3 AgentAction íƒ€ì… ì •ì˜

```typescript
interface AgentAction {
    type: 'mentoring_suggestion' | 'learning_path_suggestion' | 'job_posting_suggestion'
    reason: string  // "ëŒ€í™”ë¥¼ ë³´ë‹ˆ UX ë””ìì¸ ìª½ì— ê´€ì‹¬ì´..."
    data: MentoringSuggestionData | LearningPathData | JobPostingData
    actions: ActionButton[]
}

interface MentoringSuggestionData {
    sessions: MentoringSession[]
}

interface LearningPathData {
    career: string
    estimatedWeeks: number
    topics: string[]
}

interface JobPostingData {
    jobs: JobPosting[]
}

interface ActionButton {
    id: string
    label: string
    primary?: boolean
    params?: Record<string, any>
}
```

---

## 5. Tool ì„¤ê³„

### 5.1 Tool ëª©ë¡

| Tool | ì„¤ëª… | íŠ¸ë¦¬ê±° ì‹œì  |
|------|------|-------------|
| `search_mentoring_sessions` | ê´€ë ¨ ë©˜í† ë§ ì„¸ì…˜ ê²€ìƒ‰ | ì§ì—… ê´€ì‹¬ì‚¬ í˜•ì„± ì‹œ |
| `create_mentoring_booking` | ë©˜í† ë§ ì˜ˆì•½ | ì‚¬ìš©ìê°€ ì˜ˆì•½ ë²„íŠ¼ í´ë¦­ |
| `search_learning_paths` | í•™ìŠµ ê²½ë¡œ í…œí”Œë¦¿ ê²€ìƒ‰ | í•™ìŠµ ì˜ì§€ í‘œí˜„ ì‹œ |
| `create_learning_path` | í•™ìŠµ ê²½ë¡œ ìƒì„± | ì‚¬ìš©ìê°€ ì‹œì‘ ë²„íŠ¼ í´ë¦­ |
| `search_job_postings` | ì±„ìš©ê³µê³  ê²€ìƒ‰ | ì·¨ì—… ì˜ì§€ í‘œí˜„ ì‹œ |
| `prepare_questions` | ë©˜í† ë§ ì§ˆë¬¸ ì¤€ë¹„ | ì˜ˆì•½ ì™„ë£Œ í›„ |

### 5.2 Tool êµ¬í˜„

```python
from langchain.tools import tool
from typing import List, Optional
import httpx

@tool
async def search_mentoring_sessions(
    career_interest: str,
    limit: int = 3
) -> dict:
    """
    ì‚¬ìš©ìì˜ ê´€ì‹¬ ë¶„ì•¼ì™€ ê´€ë ¨ëœ ë©˜í† ë§ ì„¸ì…˜ì„ ê²€ìƒ‰í•©ë‹ˆë‹¤.

    Args:
        career_interest: ê´€ì‹¬ ì§ì—…/ë¶„ì•¼ (ì˜ˆ: "UX ë””ìì´ë„ˆ", "ë°±ì—”ë“œ ê°œë°œì")
        limit: ê²€ìƒ‰ ê²°ê³¼ ìˆ˜

    Returns:
        dict: ë©˜í† ë§ ì„¸ì…˜ ëª©ë¡
    """
    async with httpx.AsyncClient() as client:
        response = await client.get(
            f"{BACKEND_URL}/api/mentoring-sessions/available",
            params={"career": career_interest, "limit": limit}
        )
        return response.json()


@tool
async def create_mentoring_booking(
    user_id: int,
    session_id: int,
    reason: Optional[str] = None
) -> dict:
    """
    ë©˜í† ë§ ì„¸ì…˜ì„ ì˜ˆì•½í•©ë‹ˆë‹¤.

    Args:
        user_id: ì‚¬ìš©ì ID
        session_id: ë©˜í† ë§ ì„¸ì…˜ ID
        reason: ìƒë‹´ í¬ë§ ì´ìœ 

    Returns:
        dict: ì˜ˆì•½ ê²°ê³¼ (booking_id, status, datetime)
    """
    async with httpx.AsyncClient() as client:
        response = await client.post(
            f"{BACKEND_URL}/api/mentoring-bookings",
            json={
                "menteeId": user_id,
                "sessionId": session_id,
                "reason": reason
            }
        )
        return response.json()


@tool
async def prepare_mentoring_questions(
    career_interest: str,
    user_background: str,
    mentor_expertise: str
) -> dict:
    """
    ë©˜í† ë§ì—ì„œ ë¬¼ì–´ë³¼ ì§ˆë¬¸ì„ AIê°€ ì¤€ë¹„í•©ë‹ˆë‹¤.

    Args:
        career_interest: ê´€ì‹¬ ì§ì—…
        user_background: ì‚¬ìš©ì ë°°ê²½ (ì „ê³µ, ê²½í—˜ ë“±)
        mentor_expertise: ë©˜í†  ì „ë¬¸ ë¶„ì•¼

    Returns:
        dict: ì¶”ì²œ ì§ˆë¬¸ ëª©ë¡
    """
    # LLMìœ¼ë¡œ ì§ˆë¬¸ ìƒì„±
    ...
```

---

## 6. Frontend ë³€ê²½ ì‚¬í•­

### 6.1 ê¸°ì¡´ career-chat ìˆ˜ì •

```
/pages/career-chat/
â”œâ”€â”€ page.tsx                    # ê¸°ì¡´ + agentAction ì²˜ë¦¬ ì¶”ê°€
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ MessageList.tsx         # ê¸°ì¡´
â”‚   â”œâ”€â”€ MessageItem.tsx         # ê¸°ì¡´
â”‚   â”œâ”€â”€ [NEW] AgentCard.tsx     # ì—ì´ì „íŠ¸ ì œì•ˆ ì¹´ë“œ
â”‚   â”œâ”€â”€ [NEW] MentoringCard.tsx # ë©˜í† ë§ ì„¸ì…˜ ì¹´ë“œ
â”‚   â”œâ”€â”€ [NEW] ActionButtons.tsx # ì•¡ì…˜ ë²„íŠ¼ ê·¸ë£¹
â”‚   â””â”€â”€ [NEW] ProcessingIndicator.tsx # ì²˜ë¦¬ ì¤‘ í‘œì‹œ
â””â”€â”€ hooks/
    â””â”€â”€ [NEW] useAgentAction.ts # ì—ì´ì „íŠ¸ ì•¡ì…˜ ì²˜ë¦¬
```

### 6.2 AgentCard ì»´í¬ë„ŒíŠ¸

```tsx
interface AgentCardProps {
    action: AgentAction
    onAction: (actionId: string, params?: any) => void
    isProcessing: boolean
}

export function AgentCard({ action, onAction, isProcessing }: AgentCardProps) {
    return (
        <div className="agent-card">
            {/* ì œì•ˆ ì´ìœ  */}
            <div className="agent-reason">
                <span className="icon">ğŸ’¡</span>
                <span>{action.reason}</span>
            </div>

            {/* ì»¨í…ì¸  (íƒ€ì…ë³„ ë‹¤ë¥¸ ë Œë”ë§) */}
            <div className="agent-content">
                {action.type === 'mentoring_suggestion' && (
                    <MentoringSessionList sessions={action.data.sessions} />
                )}
                {action.type === 'learning_path_suggestion' && (
                    <LearningPathPreview data={action.data} />
                )}
                {action.type === 'job_posting_suggestion' && (
                    <JobPostingList jobs={action.data.jobs} />
                )}
            </div>

            {/* ì•¡ì…˜ ë²„íŠ¼ */}
            <div className="agent-actions">
                {action.actions.map(btn => (
                    <button
                        key={btn.id}
                        className={btn.primary ? 'btn-primary' : 'btn-secondary'}
                        onClick={() => onAction(btn.id, btn.params)}
                        disabled={isProcessing}
                    >
                        {isProcessing && btn.primary ? <Spinner /> : btn.label}
                    </button>
                ))}
            </div>
        </div>
    )
}
```

### 6.3 MentoringCard ì»´í¬ë„ŒíŠ¸

```tsx
interface MentoringSession {
    id: number
    mentorName: string
    mentorTitle: string
    topic: string
    datetime: string
    availableSlots: number
}

export function MentoringSessionList({ sessions }: { sessions: MentoringSession[] }) {
    return (
        <div className="mentoring-sessions">
            {sessions.map(session => (
                <div key={session.id} className="session-card">
                    <div className="session-header">
                        <span className="mentor-name">{session.mentorName}</span>
                        <span className="mentor-title">{session.mentorTitle}</span>
                    </div>
                    <div className="session-topic">{session.topic}</div>
                    <div className="session-meta">
                        <span className="datetime">
                            ğŸ“… {formatDateTime(session.datetime)}
                        </span>
                        <span className="slots">
                            {session.availableSlots}ìë¦¬ ë‚¨ìŒ
                        </span>
                    </div>
                </div>
            ))}
        </div>
    )
}
```

---

## 7. Backend ë³€ê²½ ì‚¬í•­

### 7.1 ChatResponse DTO ìˆ˜ì •

```java
public record ChatResponse(
    String sessionId,
    String message,
    IdentityStatusDto identityStatus,
    AgentActionDto agentAction  // NEW - nullable
) {}

public record AgentActionDto(
    String type,
    String reason,
    Object data,
    List<ActionButtonDto> actions
) {}

public record ActionButtonDto(
    String id,
    String label,
    Boolean primary,
    Map<String, Object> params
) {}
```

### 7.2 Python AI Service í˜¸ì¶œ ìˆ˜ì •

```java
@Service
public class CareerChatService {

    public ChatResponse chat(ChatRequest request) {
        // ê¸°ì¡´ ë¡œì§
        PythonChatResponse pythonResponse = pythonChatService.chat(request);

        // ì—ì´ì „íŠ¸ ì•¡ì…˜ì´ ìˆìœ¼ë©´ í¬í•¨
        AgentActionDto agentAction = null;
        if (pythonResponse.getAgentAction() != null) {
            agentAction = mapToAgentActionDto(pythonResponse.getAgentAction());
        }

        return new ChatResponse(
            request.getSessionId(),
            pythonResponse.getMessage(),
            pythonResponse.getIdentityStatus(),
            agentAction
        );
    }
}
```

---

## 8. Python AI Service ë³€ê²½ ì‚¬í•­

### 8.1 ChatService ìˆ˜ì •

```python
# services/chat_service.py

class ChatService:
    def __init__(self):
        self.llm = ChatOpenAI(model="gpt-4o-mini")
        self.agent_integration = AgentIntegration()

    async def generate_response(
        self,
        session_id: str,
        user_message: str,
        conversation_history: list,
        identity_status: dict
    ) -> dict:
        # 1. ê¸°ì¡´ ì‘ë‹µ ìƒì„±
        response_message = await self._generate_chat_response(...)

        # 2. ì—ì´ì „íŠ¸ íŠ¸ë¦¬ê±° ë¶„ì„ (NEW)
        agent_action = await self.agent_integration.analyze_and_trigger(
            conversation_history=conversation_history,
            identity_status=identity_status,
            current_message=user_message
        )

        return {
            "message": response_message,
            "agent_action": agent_action  # Noneì´ë©´ ìƒëµ
        }
```

### 8.2 AgentIntegration í´ë˜ìŠ¤

```python
# services/assistant/agent_integration.py

class AgentIntegration:
    def __init__(self):
        self.llm = ChatOpenAI(model="gpt-4o-mini")
        self.tools = [
            search_mentoring_sessions,
            search_learning_paths,
            search_job_postings
        ]

    async def analyze_and_trigger(
        self,
        conversation_history: list,
        identity_status: dict,
        current_message: str
    ) -> Optional[dict]:
        """ëŒ€í™” ë¶„ì„ í›„ ì—ì´ì „íŠ¸ ì•¡ì…˜ íŠ¸ë¦¬ê±°"""

        # 1. íŠ¸ë¦¬ê±° ì¡°ê±´ ë¶„ì„
        trigger_result = await self._analyze_trigger(
            conversation_history,
            identity_status
        )

        if not trigger_result["should_trigger"]:
            return None

        # 2. íŠ¸ë¦¬ê±° íƒ€ì…ì— ë”°ë¼ Tool ì‹¤í–‰
        if trigger_result["trigger_type"] == "mentoring_suggestion":
            sessions = await search_mentoring_sessions(
                career_interest=trigger_result["detected_career"]
            )
            return {
                "type": "mentoring_suggestion",
                "reason": trigger_result["reason"],
                "data": {"sessions": sessions},
                "actions": [
                    {"id": "book", "label": "ì˜ˆì•½í•˜ê¸°", "primary": True},
                    {"id": "more", "label": "ë‹¤ë¥¸ ì„¸ì…˜ ë³´ê¸°"},
                    {"id": "skip", "label": "ê³„ì† ëŒ€í™”í•˜ê¸°"}
                ]
            }

        # ... ë‹¤ë¥¸ íŠ¸ë¦¬ê±° íƒ€ì… ì²˜ë¦¬

        return None

    async def _analyze_trigger(self, conversation_history, identity_status) -> dict:
        """LLMìœ¼ë¡œ íŠ¸ë¦¬ê±° ì¡°ê±´ ë¶„ì„"""
        prompt = TRIGGER_ANALYSIS_PROMPT.format(
            identity_clarity=identity_status.get("clarity", 0),
            current_stage=identity_status.get("stage", "PRESENT"),
            detected_interests=identity_status.get("traits", []),
            conversation_history=self._format_history(conversation_history)
        )

        response = await self.llm.ainvoke([HumanMessage(content=prompt)])
        return json.loads(response.content)
```

---

## 9. êµ¬í˜„ ìˆœì„œ

### Phase 1: Python AI Service
1. [ ] `services/assistant/agent_integration.py` - ì—ì´ì „íŠ¸ í†µí•© í´ë˜ìŠ¤
2. [ ] `services/assistant/tools.py` - Tool í•¨ìˆ˜ êµ¬í˜„
3. [ ] `services/chat_service.py` ìˆ˜ì • - ì—ì´ì „íŠ¸ ì—°ë™
4. [ ] íŠ¸ë¦¬ê±° ë¶„ì„ í”„ë¡¬í”„íŠ¸ íŠœë‹
5. [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸

### Phase 2: Backend
1. [ ] DTO ìˆ˜ì • (ChatResponseì— agentAction ì¶”ê°€)
2. [ ] CareerChatService ìˆ˜ì •
3. [ ] ë©˜í† ë§ ì„¸ì…˜ ê²€ìƒ‰ API í™•ì¸/ìˆ˜ì •
4. [ ] í†µí•© í…ŒìŠ¤íŠ¸

### Phase 3: Frontend
1. [ ] AgentCard ì»´í¬ë„ŒíŠ¸
2. [ ] MentoringCard, LearningPathCard ë“±
3. [ ] useAgentAction í›…
4. [ ] career-chat í˜ì´ì§€ ìˆ˜ì •
5. [ ] ìŠ¤íƒ€ì¼ë§

### Phase 4: ê³ ë„í™”
1. [ ] íŠ¸ë¦¬ê±° ì¡°ê±´ íŠœë‹
2. [ ] ì—ì´ì „íŠ¸ ì‘ë‹µ í’ˆì§ˆ ê°œì„ 
3. [ ] ì•¡ì…˜ ì‹¤í–‰ í›„ íë¦„ (ì˜ˆì•½ ì™„ë£Œ â†’ ì§ˆë¬¸ ì¤€ë¹„ ì œì•ˆ)
4. [ ] ì—ëŸ¬ í•¸ë“¤ë§

---

## 10. ê¸°ìˆ  ê²°ì • ì‚¬í•­

| í•­ëª© | ê²°ì • | ì´ìœ  |
|------|------|------|
| í†µí•© ë°©ì‹ | ê¸°ì¡´ ì±„íŒ…ì— í†µí•© | ìì—°ìŠ¤ëŸ¬ìš´ UX, ë³„ë„ í˜ì´ì§€ ë¶ˆí•„ìš” |
| íŠ¸ë¦¬ê±° íŒë‹¨ | LLM ê¸°ë°˜ | ê·œì¹™ ê¸°ë°˜ë³´ë‹¤ ìœ ì—°í•¨ |
| Tool ì‹¤í–‰ | ì„œë²„ ì‚¬ì´ë“œ | ë³´ì•ˆ, API í‚¤ ê´€ë¦¬ |
| ì‹¤ì‹œê°„ í‘œì‹œ | ê¸°ì¡´ ì‘ë‹µì— í¬í•¨ | SSE ì¶”ê°€ êµ¬í˜„ ë¶ˆí•„ìš” |

---

## 11. ì˜ˆìƒ ì¼ì •

| Phase | ì‘ì—… |
|-------|------|
| Phase 1 | Python ì—ì´ì „íŠ¸ í†µí•© |
| Phase 2 | Backend ìˆ˜ì • |
| Phase 3 | Frontend UI |
| Phase 4 | ê³ ë„í™” & íŠœë‹ |

---

## 12. ì°¸ê³  ìë£Œ

- ê¸°ì¡´ ChatService: `ai-service/services/chat_service.py`
- ê¸°ì¡´ ì—ì´ì „íŠ¸: `ai-service/services/agents/`
- ë©˜í† ë§ API: `backend/.../MentoringBookingController.java`
- í”„ë¡ íŠ¸ ì±„íŒ…: `frontend/src/pages/career-chat/page.tsx`
